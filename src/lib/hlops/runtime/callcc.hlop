(* callcc.hlop
 *
 * COPYRIGHT (c) 2007 The Manticore Project (http://manticore.cs.uchicago.edu)
 * All rights reserved.
 *
 * Capture the current continuation.
 *)

#include "types.def"

define @callcc (f : fun(cont(any) / exh -> any) / exh : exh) : any =
(*  let f : fun([cont(any)] / exh -> any) = #0(arg)*)
  cont k(x : any) = return (x)
(*  let k :[cont(any)] = wrap(k)*)
  apply f (k / exh)
;
