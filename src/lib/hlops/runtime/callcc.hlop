(* callcc.hlop
 *
 * COPYRIGHT (c) 2007 The Manticore Project (http://manticore.cs.uchicago.edu)
 * All rights reserved.
 *
 * Capture the current continuation.
 *)

#include "types.def"

define @callcc (arg : [fun(cont(any) -> any)] / exh : exh) : any =
  let f : fun(cont(any) -> any) = #0(arg)
  cont k(x : any) = return (x)
  apply f (k)
